[tasks.test]
run = "go test ./..."
description = "Run all tests (unit tests only)"

[tasks.test-unit]
run = "go test ./pkg/... ./internal/..."
description = "Run unit tests"

[tasks.test-integration]
run = "go test ./test/integration/..."
description = "Run integration tests"

[tasks.test-e2e]
run = "go test ./test/e2e/..."
description = "Run end-to-end tests"

[tasks.test-all]
run = "go test ./... && go test ./test/integration/... && go test ./test/e2e/..."
description = "Run all tests: unit, integration, and e2e"

[tasks.test-coverage]
run = "go test -coverprofile=coverage.out ./... && go tool cover -html=coverage.out -o coverage.html"
description = "Run tests with coverage report"

[tasks.test-coverage-integration]
run = "go test -coverprofile=coverage-integration.out ./test/integration/... && go tool cover -html=coverage-integration.out -o coverage-integration.html"
description = "Run integration tests with coverage"

[tasks.test-verbose]
run = "go test -v ./..."
description = "Run all tests with verbose output"

[tasks.build]
run = "go build -o bin/cronmetrics ./cmd/cronmetrics"
description = "Build static binary"

[tasks.dev]
run = "./bin/cronmetrics serve --dev"
description = "Start development server"

[tasks.clean]
run = "rm -rf bin/ coverage*.out coverage*.html"
description = "Clean build artifacts and coverage reports"

[tasks.lint]
run = "go vet ./... && go fmt ./..."
description = "Run linter and formatter"

[tasks.ci]
run = "mise run lint && mise run test-all && mise run build"
description = "Run CI pipeline: lint, test, build"
